var request = require('request');

var users = [
  "0nlybes",
  "554red",
  "5walid_",
  "aarikspi",
  "aaron_cross_",
  "abstergo198",
  "admiralarcanin",
  "alkalinefoo",
  "allmighty6",
  "alohaking2",
  "ambushman2",
  "arcanangelo",
  "artform_fazeon",
  "ashtronomi",
  "asox_infiniti",
  "astridge3",
  "atemfinge",
  "avngrs_captainameric",
  "ayyxenno",
  "b4ckbon",
  "baconta",
  "bblyf",
  "bdetinn",
  "bdude2",
  "beantv00",
  "beardedblad",
  "bestnidab",
  "big__melon",
  "bimnomerc",
  "black1echan720",
  "blooregardme",
  "boostedsupr",
  "breannabo",
  "brendon042",
  "btohn",
  "bullet_mage_paria",
  "busha2",
  "c6c6do",
  "cable_guy_is_i",
  "caelri",
  "captainculott",
  "captiansparklzefan2",
  "carnagechaos42",
  "cazz_t",
  "ceeeeythe",
  "champagne44",
  "chaosrambuta",
  "cheskofresk",
  "cloneman509e",
  "commanderwt",
  "coolname646",
  "craftjusti",
  "crumplecor",
  "cursedbybeaut",
  "danansomhandso",
  "danibitbo",
  "dantestyleps",
  "dasnordlicht7",
  "dderd",
  "decicu",
  "decorder8",
  "deepspacewhal",
  "delphindo",
  "demipixel",
  "denisj9",
  "devil_shooter9",
  "dfau",
  "dj_235",
  "dmanracer9",
  "domi840nato",
  "donlokima",
  "dopefox2",
  "drathom",
  "dualdea",
  "duohbotlan",
  "dvonkur",
  "dylanbrianmeynel",
  "eatzdirty",
  "eddisdea",
  "elfshot8564",
  "eludelogi",
  "encounterrolepla",
  "enot50cen",
  "ente_des_grauen",
  "epicshnea",
  "esproc_",
  "evanrebel",
  "ewqdsa022",
  "exterm1nad0",
  "fat_mon",
  "fawl3",
  "figttoaliv",
  "flairgamerl",
  "flappjack3",
  "fluske",
  "fonzipo",
  "foxybuddh",
  "fsfh6",
  "gamerex4",
  "gamingpowerhous",
  "gehsekk",
  "general_confusio",
  "gg_caus",
  "gg_molecul",
  "gglak",
  "glints",
  "godyourestupi",
  "gooshigamin",
  "grx_orchidstr",
  "gunslinger60",
  "h4rd_drazy",
  "halfmanhalfgy",
  "halicarnassi",
  "halogamer241",
  "hd_v1son",
  "hhbran",
  "hiimwatt",
  "holosuitemedi",
  "hostilehamster",
  "htownboyz71",
  "hukish",
  "hunnitboy13",
  "igzhazardkings1",
  "ihatecre",
  "ilacfresh",
  "imtheskylin",
  "indecency126",
  "injectpr",
  "insanementalis",
  "ipodragon",
  "ireapz_carrie",
  "itstheonlinepredator",
  "itz_kierz12",
  "itzasicksco",
  "jackyjacky2",
  "jacob_j_va",
  "jaegamesh",
  "jaehre",
  "jamiestews0",
  "jaraczewski1",
  "jerellyy",
  "jeuxdewa",
  "joan_ibanez",
  "johnnysilver198",
  "jshope201",
  "juanolidus_8",
  "juknow9",
  "juninnhogd",
  "k42lovesot",
  "kaiser_ange",
  "kamuch",
  "kaos164",
  "karmadynamic",
  "kbug300",
  "keaster667",
  "kmnomya",
  "knightzreturn",
  "kokouli",
  "kontikfir",
  "kopi1c",
  "kotaerplayroblo",
  "kwarepta",
  "laczekofficia",
  "lastginger",
  "lazygamingcentra",
  "leggybeas",
  "letifer44",
  "lightings_sou",
  "lionheart305",
  "livefightnightt",
  "liveworksho",
  "livlogi",
  "lizar_tf2",
  "lllpesoll",
  "lo_nd",
  "logi_ge",
  "lonestarf",
  "longstreet4",
  "lotta_game",
  "lucky_misfi",
  "lucoart",
  "madara_9",
  "madden_is_everythin",
  "mahoria",
  "malay1",
  "maxinfe",
  "maxsimpson333",
  "mayrahile",
  "mestarjus",
  "mimeliv",
  "minecarft_mianit",
  "mjhess5",
  "moghedien9",
  "monsieursapi",
  "moonlips1",
  "moonthegoa",
  "mothetan",
  "mrdagamo",
  "mrghost7802streameu",
  "muminball",
  "mynakyn",
  "myroxx133",
  "nagida",
  "negofis",
  "no1killz",
  "nonic08",
  "nussinh",
  "nzknb",
  "oleg36r",
  "oliver_twitch_lo",
  "oreo_fk",
  "orthusak",
  "pablosis4",
  "pandaonxt",
  "papa_car",
  "pasalacqua1",
  "passion5250",
  "peridotzativ",
  "petodavi",
  "pi93production",
  "pimpslap_wilso",
  "pingtp",
  "pixelgaming02",
  "pms_fantmxbarbi",
  "poezewoefk",
  "poorscyth",
  "pw_helper",
  "qenkcsg",
  "quitf33ding12",
  "quotientkrei",
  "rainthexii",
  "raysfire",
  "re5id",
  "reddeadakaro",
  "redfolki",
  "respectordon",
  "rngplayspokemo",
  "roarmell9",
  "roland_deschain_69",
  "ronesansf",
  "roughneckwarrio",
  "rymaster2",
  "ryzike",
  "samdundu",
  "sanchosnacho",
  "sc2feli",
  "sergeyviry",
  "sf2_f4in",
  "shadowwalle",
  "shikaga2",
  "shotgunnin4ya",
  "skittleraid",
  "smarley2",
  "smoothoperativ",
  "solaia010",
  "sometimesimepi",
  "soralifestoryy",
  "sorgrayswandi",
  "spartan_kitty13",
  "stevenwinan",
  "stopochka9",
  "suggestdot",
  "sulli_eledagamin",
  "supermacbr",
  "syninvictu",
  "tasia_",
  "tdoeboi",
  "the_hardcore_gir",
  "the_pixxe",
  "thecoraso",
  "thegiantfro",
  "thegoodiegamerba",
  "theotheren",
  "therealskelle",
  "theryu7",
  "thinkmanif",
  "thismachinekill",
  "tinyneenj",
  "tjroza",
  "tkao9",
  "tlog_ka",
  "tobi_boss50",
  "tourneylocato",
  "tr_good_grie",
  "trihrd_izanag",
  "triple_word_score",
  "trixridiculou",
  "tunnlerat1",
  "typar82",
  "vehxmythoclas",
  "vinhbaoba",
  "voocsg",
  "voodoochicken42",
  "w1no",
  "wastelandgaming_wl",
  "westside_gooni",
  "wheresmymowe",
  "whokilledme540",
  "wild_bill_9",
  "wildtyphlosio",
  "winningdog",
  "wiseman23",
  "xbe4stm0d",
  "xcv___",
  "xfakebeas",
  "xtjkillin",
  "xx_streaman_x",
  "xxbd",
  "xxyahik",
  "yangli80121",
  "zacmick12",
  "zastba",
  "zeuz3398"
];

var dates = [];

var count = 0;

for (var user of users) {
  request('https://api.twitch.tv/kraken/users/' + user, function(err, s, body) {
    console.log(body);
    var meh = JSON.parse(body);
    dates.push(meh.created_at);
    count++;
    if (count == users.length) done();
  });
}

var data = {};

function done() {
  for (var d = 0; d < dates.length; d++) {
    var date = dates[d].match(/(.+)T/)[1];
    if (!data[date]) {
      data[date] = 1;
    } else data[date]++;
  }

  var arr = Array();
  Object.keys(data).forEach(function(i) {
    arr.push({ amt: data[i], date: i});
  });
  arr = arr.sort(function(a, b) {
    return a.amt < b.amt;
  });
  console.log(arr);
}